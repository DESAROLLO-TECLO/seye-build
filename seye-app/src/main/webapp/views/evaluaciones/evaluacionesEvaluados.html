<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Evaluaciones</title>
		<style>
			.etiquetaCancelado {
				display: inline-block;
				min-width: 0.7143rem;
				padding: 0.2143rem 0.0rem;
				font-size: 0.8857rem;
				font-weight: 600;
				line-height: 1;
				vertical-align: baseline;
				white-space: nowrap;
				text-align: center;
				border-radius: 0.7143rem;
			}
			
			.botonDescargaPDFM {
				display: inline-block;
				min-width: 0.7143rem;
				padding: 0.2143rem 0.0rem;
				font-size: 0.8857rem;
				font-weight: 600;
				line-height: 1;
				vertical-align: baseline;
				white-space: nowrap;
				text-align: center;
				border-radius: 0.7143rem;
				border: 3px solid rgba(85, 86, 90, .9);
				background: rgba(210, 210, 210, 0.9);
			}
			
			/* Color del elemento activo */
			.tema-tecloLight .switcher.active .switcher-label.true {
				color: #2ccf0a !important;
			}
			/* Color del label false */
			.tema-tecloLight .swTeclo .switcher-line:before {
				background: #cf0a2c !important;
			}
			/* Color del label true */
			.tema-tecloLight .swTeclo .active .switcher-line:before {
				background: #2ccf0a !important;
			}
			.thumbnail{
				padding: 0 !important;
				margin-bottom: 0 !important;
				min-height: 10px !important;
			}
			.text-16{
				display:inline !important;
			}
		</style>
	</head>
	<body>
		<section class="content-header">
			<h1>Evaluados</h1>
			<ol class="breadcrumb">
				<li><a><i class="fa fa-book"></i>Evaluaciones</a></li>
				<li class="active">Evaluados</li>
			</ol>
		</section>
		
		<!-- Main content -->
		<section class="content">
			<form role="form" name="form" novalidate>
				<div class="row">
					<div class="col-md-offset-1 col-md-10">
						<div class="box box-danger">
							<div class="box-header with-border text-center">
								<div class="col-md-1 pull-left">
									<div class="pull-left">
										<button type="button" class="btn btn-box-tool btn-danger" ng-click="regresarBusq()" 
											style="font-size: 1.2rem;margin-top: 0px;padding-bottom: 0px;padding-top: 0px;" 
											data-toggle="tooltip" data-placement="right" title="" data-original-title="Regresar">
											<i class="fa fa-arrow-circle-left"></i>
										</button>
									</div>
								</div>
								<div class="col-md-10 center">
									<h3 class="box-title">Evaluación</h3>
								</div>
								<div class="col-md-1 box-tools pull-right">
									<button type="button" class="btn btn-box-tool btn-danger" ng-click="consultaEvaEvaluados()" style="font-size: 1.1rem;"
										data-toggle="tooltip" data-placement="left" title="Recargar">
										<i class="fa fa-refresh" ></i>
									</button>
								</div>
							</div>
							<div class="row center">
								<div class="col-md-10 col-md-offset-1">
									<div class="row">
										<div class="col-md-12">
											<div class="form-group" style="margin-bottom: 0 !important;">
												<div class="thumbnail">
											      <div class="caption">
											        <h3>
										        		{{consultaEvaData[0].nbEncuesta}}
										        	</h3>
											      </div>
											    </div>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group" style="margin-bottom: 0 !important;">
												<div class="thumbnail">
											      <div class="caption">
											        <h5>
											        	<i class="fa fa-user"></i>
														<label>Tipo: </label>
														<label class="text-16">
											        		{{consultaEvaData[0].tipoEncuesta.nbTipoEncuesta}}
											        	</label>
													</h5>
											        
											      </div>
											    </div>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group" style="margin-bottom: 0 !important;">
												<div class="thumbnail">
											      <div class="caption">
											        <h5>
											        	<i class="fa fa-exchange"></i>
														<label>Secciones: </label>
														<label class="text-16">
											        		{{consultaEvaData[0].nuSecciones==null?0:consultaEvaData[0].nuSecciones}}
											        	</label>
													</h5>
											      </div>
											    </div>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group">
												<div class="thumbnail">
											      <div class="caption">
											        <h5>
											        	<i class="fa fa-exchange"></i>
														<label>Preguntas: </label>
														<label class="text-16">
											        		{{consultaEvaData[0].nuPreguntas}}
											        	</label>
													</h5>
											        
											      </div>
											    </div>
											</div>
										</div>
										<div class="col-md-3">
											<div class="form-group">
												<div class="thumbnail">
											      <div class="caption">
											        <h5>
											        	<i class="fa fa-cloud-download"></i>
														<label>Descargar: </label>
														<a ng-click="descargaPDFRecibida(consultaEvaData[0].nbEncuestaOrigen)" class="text-16">
															<img src="static/dist/img/pdf_logo.png" width="25px;" class="text-16">
														</a>
													</h5>
											      </div>
											    </div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="row" ng-if="viewpanelConsulta">
					<div class="col-md-12">
						<div class="box box-danger">
							<div class="box-header row">
								<div class="col-md-3 col-xs-12">
									<h3 class="box-title">
										Registros Encontrados:  {{ (consultaEvaData[0].usuarioEncuesta | filter:view.searchSomething).length | number:0 }}
									</h3>
								</div>
								<div class="col-md-6 col-xs-9 center">
									<p style="margin-top: .5rem;"><b>{{msjTabla}}</b></p>
								</div>
	  						 	<div class="col-md-3 col-xs-3">
	      						 	<div class="input-group">
						        		<input id="searchsomething" type="text" class="form-control" placeholder="Buscar por filtro" ng-model="filter.searchSomething">
										<span class="input-group-addon"><i class="fa fa-search"></i></span>
										<a class="img-rounded" title="Genera Reporte {{parametrosConsulta.tipoBusqueda}}" ng-click="descargarExcel()">
											<span class="pull-right">
												<img src="static/dist/img/excel.png" width="25px;">
											</span>
										</a>
									</div>
						 		</div>
							</div>
							
							<div class="box-body table-responsive">
								<div class="col-md-12" ng-if="viewpanelConsulta == 1">
									<div class="row" style="display: block;overflow: auto;">
										<table id="tabla_informacion" class="table table-striped table-hover header-fixed">
											<thead>
												<tr>
													<th style="width:10px">
														<span data-toggle="tooltip" data-placement="left" data-html="true" data-original-title="{{generales.txMarcaTodos}}">
															<label class="containerCheck">
																<input type="checkbox" ng-checked="flags.todos" ng-false-value="false" ng-true-value="true"
																	ng-change="marcarTodos()" ng-model="flags.todos">
																<span class="checkmark"></span>
															</label>
														</span>
													</th>
													<th sort order="'usuario.cdUsuario'" 						by="order" reverse="reverse" class="text-center" style="width: 50px;">PLACA OFICIAL</th>
													<th sort order="'usuario.nombreOficial'" 					by="order" reverse="reverse" class="text-center" style="width: 80px;">NOMBRE OFICIAL</th>
					                                <th sort order="'intentoMostar.fhInicio'" 					by="order" reverse="reverse" class="text-center" style="width: 70px;">FECHA APLICACIÓN</th>
					                                <th sort order="'intentoMostar.nuCalificacion'" 			by="order" reverse="reverse" class="text-center" style="width: 50px;">CALIFICACIÓN</th>
					                                <th sort order="'nuIntegerentos'"							by="order" reverse="reverse" class="text-center" style="width: 45px;">INTENTOS</th> 
					                                <th sort order="'intentoMostar.stEncuesta.idStEncuesta'"	by="order" reverse="reverse" class="text-center" style="width: 45px;">ESTATUS</th>
					                                <th sort order="'stAplicaEncuesta'"							by="order" reverse="reverse" class="text-center" style="width: 50px;">ACTIVO</th>
					                                <th sort order="'intentoMostar.stEncuesta.idStEncuesta'"	by="order" reverse="reverse" class="text-center" style="width: 50px;">COMPROBANTE</th>
					                                <th sort order="'intentoMostar.stEncuesta.idStEncuesta'"	by="order" reverse="reverse" class="text-center" style="width: 50px;">CONSTANCIA</th>
					                                <th sort order="'intentoMostar.stEncuesta.idStEncuesta'"	by="order" reverse="reverse" class="text-center" style="width: 50px;">DETALLE</th>
												</tr>
											</thead>
											<tbody style="display: block; overflow: auto; max-height: 200px;">
												<tr ng-if="(consultaEvaData[0].usuarioEncuesta | filter:filter.searchSomething).length < 1)">
													<td colspan="8" class="text-center">
														<h4>No se encontraron coincidencias</h4>
													</td>
												</tr>
												<tr dir-paginate="consultaEva in consultaEvaData[0].usuarioEncuesta | filter:filter.searchSomething  | orderBy:order:reverse | itemsPerPage: tabla.filter.rowsPerPage" pagination-id="tabla2">
													<td class="center" style="width:10px">
														<span data-toggle="tooltip" data-placement="left" data-html="true" data-original-title="{{consultaEva.txAgregar}}">
															<label class="containerCheck">
																<input type="checkbox" ng-checked="intento.checked" ng-false-value="false" ng-true-value="true"
																	ng-model="consultaEva.checked" ng-click="checkManual(consultaEva.intentoMostar)">
<!-- 																	ng-disabled="consultaEva.intentoMostar == null || consultaEva.intentoMostar.stCalificacion == null || consultaEva.intentoMostar.stCalificacion.cdStCalificacion != 'A' || consultaEva.intentoMostar.nuPreguntasVacias > 0"> -->
																<span class="checkmark"></span>
															</label>
														</span>
													</td>
													<td class="text-center" style="width: 50px;">
														{{consultaEva.usuario.cdUsuario}}
													</td>
													<td class="" style="width: 90px;">
														{{consultaEva.usuario.nbUsuario}} 
														{{consultaEva.usuario.nbApaterno}} 
														{{consultaEva.usuario.nbAmaterno}}
													</td>
													<td class="text-center" style="width: 75px;">{{consultaEva.intentoMostar.fhInicio}}</td>
													<td class="text-center" style="width: 45px;">{{consultaEva.intentoMostar.nuCalificacion}}</td>
													<td class="text-center" style="width: 45px;">
														<span class="etiquetaCancelado fullWidth" 
															style="cursor: pointer; background-color: #868686;"
															ng-click="showDialogIntentos(consultaEva)"
															ng-if="consultaEva.nuIntegerentos > 0">
																{{consultaEva.nuIntegerentos}}
														</span>
														<span class="etiquetaCancelado fullWidth" 
															style="background-color: #868686;"
															ng-if="consultaEva.nuIntegerentos < 1">
																{{consultaEva.nuIntegerentos}}
														</span>
													</td>
													<td class="text-center" style="width: 50px;">
														<span class="etiquetaCancelado fullWidth" 
															style="background-color: {{consultaEva.intentoMostar.stEncuesta.cdColor}};">
															{{consultaEva.intentoMostar.stEncuesta.nbStEncuesta}}
														</span>
													</td>
													<td class="text-center" style="width: 50px;">
														<switcher class="swTeclo"
															id-check="stAplicaEncuesta"
															ng-model="consultaEva.stAplicaEncuesta"
															ng-change="activaUsuario(newValue, oldValue, consultaEva.idUsuarioEncuesta, consultaEva.intentoMostar.idUsuEncuIntento,consultaEva)"
															true-label="<i class='fa fa-check-circle'></i>"
															true-value="1"
															false-label="<i class='fa fa-times-circle'></i>"
															false-value="0">
														</switcher>
													</td>
													<td class="text-center" style="width: 50px;">
														<a ng-click="mostrarPDF(consultaEva.usuario.idUsuario, consultaEva.intentoMostar.idUsuEncuIntento, consultaEva.idUsuarioEncuesta,'COM')"
															ng-if="consultaEva.intentoMostar != null && consultaEva.intentoMostar.stCalificacion != null && consultaEva.intentoMostar.stCalificacion.cdStCalificacion == 'A' && consultaEva.intentoMostar.nuPreguntasVacias < 1"
															data-toggle="tooltip" data-placement="top" data-html="true" data-original-title="Descargar Comprobante">
															<img src="static/dist/img/pdf_logo.png" width="25px;">
														</a>
													</td>
													<td class="text-center" style="width: 50px;">
														<a ng-click="mostrarPDF(consultaEva.usuario.idUsuario, consultaEva.intentoMostar.idUsuEncuIntento, consultaEva.idUsuarioEncuesta,'C')"
															ng-if="consultaEva.intentoMostar != null && consultaEva.intentoMostar.stCalificacion != null && consultaEva.intentoMostar.stCalificacion.cdStCalificacion == 'A' && consultaEva.intentoMostar.nuPreguntasVacias < 1"
															data-toggle="tooltip" data-placement="top" data-html="true" data-original-title="Descargar Constancia">
															<img src="static/dist/img/pdf_logo.png" width="25px;">
														</a>
													</td>
													<td class="text-center" style="width: 50px;">
														<a ng-click="mostrarPDF(consultaEva.usuario.idUsuario, consultaEva.intentoMostar.idUsuEncuIntento, consultaEva.idUsuarioEncuesta,'P')"
															ng-if="consultaEva.intentoMostar.stEncuesta.idStEncuesta < 3"
															data-toggle="tooltip" data-placement="top" data-html="true" data-original-title="Descargar Detalle de Preguntas">
															<img src="static/dist/img/pdf_logo.png" width="25px;">
														</a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
									<div class="row">
										<div class="col-md-2 center">
											<span ng-click="descargarPDFMasivo2('C')" ng-show="flags.PDFMasivo" class="botonDescargaPDFM fullWidth" 
												data-toggle="tooltip" data-placement="top" data-html="true" data-original-title="Descargar Constancias"
												style="cursor: pointer;">
												<img src="static/dist/img/pdf_logo.png" width="25px;">
												<b>Descargar Constancias</b>
											</span>
										</div>
										<div class="col-md-2 center">
											<span ng-click="descargarPDFMasivo2('P')" ng-show="flags.PDFMasivo" class="botonDescargaPDFM fullWidth" 
												data-toggle="tooltip" data-placement="top" data-html="true" data-original-title="Descargar Detalle Preguntas"
												style="cursor: pointer;">
												<img src="static/dist/img/pdf_logo.png" width="25px;">
												<b>Descargar Detalle</b>
											</span>
										</div>
									</div>
								</div>
							</div>
							<div class="container-fluid">
								<div class="fixed-table-pagination" style="display:block;">
<!-- 									<rows-per-page rows="tabla.filter.rowsPerPage" filtro="filter.searchSomething" array="consultaEvaData[0].usuarioEncuesta"></rows-per-page> -->
									<rows-per-page rows="filter.searchSomething).length" filtro="filter.searchSomething" array="consultaEvaData[0].usuarioEncuesta"></rows-per-page>
									
									<div class="pull-right pagination" >
										<dir-pagination-controls class="pagination" pagination-id="tabla2"></dir-pagination-controls>
									</div>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</form>
		</section>
	</body>
</html>